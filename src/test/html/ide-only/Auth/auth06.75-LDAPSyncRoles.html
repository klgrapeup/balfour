<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="https://selenium.test.mattermost.com/" />
<title>auth06.75-LDAPSyncRoles</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">auth06.75-LDAPSyncRoles</td></tr>
</thead><tbody>
<!--**** Needs setup at the beginning of auth06-LDAPGroups-->
<!--LOG IN admin-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=loginId</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=loginId</td>
	<td>admin</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=loginPassword</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=loginPassword</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<!--Team admin role can be set and saved-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=headerTeamName</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=headerTeamName</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=System Console</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=System Console</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=user_management/groups</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=user_management/groups</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=div.group-list-search &gt; input[type=&quot;text&quot;]</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>css=div.group-list-search &gt; input[type=&quot;text&quot;]</td>
	<td>groupa</td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>css=div.group-list-search &gt; input[type=&quot;text&quot;]</td>
	<td>${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.group-description &gt; a &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.group-description &gt; a &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=#groupA_configure &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=#groupA_configure &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=add_team_or_channel</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=add_team_or_channel</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=#add_team &gt; button.style--none</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=#add_team &gt; button.style--none</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=div.title</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.title</td>
	<td></td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveItems</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveItems</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div &gt; a &gt; span &gt; span</td>
	<td>Member</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div &gt; a &gt; span &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=li.MenuItem &gt; button.style--none</td>
	<td>Team Admin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=li.MenuItem &gt; button.style--none</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div &gt; a &gt; span &gt; span</td>
	<td>Team Admin</td>
</tr>
<tr>
	<td>refreshAndWait</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div &gt; a &gt; span &gt; span</td>
	<td>Team Admin</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=button.btn.btn-link</td>
	<td>Remove</td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-link</td>
	<td>Remove</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=confirmModalButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=confirmModalButton</td>
	<td></td>
</tr>
<!--Channel admin role can be set and saved-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=add_team_or_channel</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=add_team_or_channel</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#add_channel &gt; button.style--none</td>
	<td>Add Channel</td>
</tr>
<tr>
	<td>click</td>
	<td>css=#add_channel &gt; button.style--none</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=div.more-modal__details</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__details</td>
	<td></td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveItems</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveItems</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//tr[2]/td[3]/div/div/div</td>
	<td>Member</td>
</tr>
<tr>
	<td>click</td>
	<td>//tr[2]/td[3]/div/div/div</td>
	<td>Member</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=li.MenuItem &gt; button.style--none</td>
	<td>Channel Admin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=li.MenuItem &gt; button.style--none</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//tr[2]/td[3]/div/div/div/a/span/span</td>
	<td>Channel Admin</td>
</tr>
<tr>
	<td>refreshAndWait</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//tr[2]/td[3]/div/div/div/a/span/span</td>
	<td>Channel Admin</td>
</tr>
<!--Team role is still Member-->
<tr>
	<td>waitForText</td>
	<td>css=div &gt; a &gt; span &gt; span</td>
	<td>Member</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=button.btn.btn-link</td>
	<td>Remove</td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-link</td>
	<td>Remove</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=confirmModalButton</td>
	<td>Yes, Remove</td>
</tr>
<tr>
	<td>click</td>
	<td>id=confirmModalButton</td>
	<td></td>
</tr>
<!--Set roles from Channel Management page-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=user_management/channels</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=user_management/channels</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.group-actions &gt; a &gt; span</td>
	<td>Edit</td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.group-actions &gt; a &gt; span</td>
	<td>Edit</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[2]/button</td>
	<td>Add Group</td>
</tr>
<tr>
	<td>click</td>
	<td>//div[2]/button</td>
	<td>Add Group</td>
</tr>
<!--Needs multiple groups linked so that they appear in this list-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=div.more-modal__name</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__name</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=div.more-modal__name</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__name</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=div.more-modal__name</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__name</td>
	<td></td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveItems</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveItems</td>
	<td></td>
</tr>
<!--Set first group in list to Channel Admin-->
<tr>
	<td>waitForText</td>
	<td>css=div &gt; a &gt; span &gt; span</td>
	<td>Member</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div &gt; a &gt; span &gt; span</td>
	<td>Member</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#role-to-be &gt; button.style--none</td>
	<td>Channel Admin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=#role-to-be &gt; button.style--none</td>
	<td>Channel Admin</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div &gt; a &gt; span &gt; span</td>
	<td>Channel Admin</td>
</tr>
<!--Leave second group in list set to Member-->
<!--Set third group in list to Channel Admin-->
<tr>
	<td>waitForText</td>
	<td>//div[3]/div/div/div/div/a</td>
	<td>Member</td>
</tr>
<tr>
	<td>click</td>
	<td>//div[3]/div/div/div/div/a</td>
	<td>Member</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#role-to-be &gt; button.style--none</td>
	<td>Channel Admin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=#role-to-be &gt; button.style--none</td>
	<td>Channel Admin</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[3]/div/div/div/div/a/span/span</td>
	<td>Channel Admin</td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<!--Verify roles persist after refresh-->
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<tr>
	<td>refreshAndWait</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.groups-list.groups-list-no-padding</td>
	<td>Name<br />Member Count<br />Roles<br /><br /><br /><br />*Channel Admin<br /><br /><br />Remove<br /><br />*Member<br /><br /><br />Remove<br /><br />*Channel Admin<br /><br /><br />Remove<br /><br /><br />*</td>
</tr>
<!--Cleanup: Remove groups-->
<tr>
	<td>waitForText</td>
	<td>css=#group-actions &gt; a &gt; span</td>
	<td>Remove</td>
</tr>
<tr>
	<td>click</td>
	<td>css=#group-actions &gt; a &gt; span</td>
	<td>Remove</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#group-actions &gt; a &gt; span</td>
	<td>Remove</td>
</tr>
<tr>
	<td>click</td>
	<td>css=#group-actions &gt; a &gt; span</td>
	<td>Remove</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#group-actions &gt; a &gt; span</td>
	<td>Remove</td>
</tr>
<tr>
	<td>click</td>
	<td>css=#group-actions &gt; a &gt; span</td>
	<td>Remove</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.groups-list-empty &gt; span</td>
	<td>No groups specified yet</td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<!--Set roles from Team Management page-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=user_management/teams</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=user_management/teams</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=b</td>
	<td>Developers</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.group-actions &gt; a &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.group-actions &gt; a &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.group-name.row-content</td>
	<td>abc</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div &gt; a &gt; span &gt; span</td>
	<td>Member</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[2]/div/div/div/div/a/span/span</td>
	<td>Member</td>
</tr>
<tr>
	<td>click</td>
	<td>//div[2]/div/div/div/div/a/span/span</td>
	<td>Member</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#role-to-be &gt; button.style--none</td>
	<td>Team Admin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=#role-to-be &gt; button.style--none</td>
	<td>Team Admin</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[3]/div/div/div/div/a/span/span</td>
	<td>Member</td>
</tr>
<tr>
	<td>click</td>
	<td>//div[3]/div/div/div/div/a/span/span</td>
	<td>Member</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#role-to-be &gt; button.style--none</td>
	<td>Team Admin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=#role-to-be &gt; button.style--none</td>
	<td>Team Admin</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.groups-list.groups-list-no-padding</td>
	<td>Name<br />Member Count<br />Roles<br /><br /><br /><br />abc0 membersMember<br /><br /><br />Remove<br /><br />developers0 membersTeam Admin<br /><br /><br />Remove<br /><br />engineering0 membersTeam Admin<br /><br /><br />Remove<br /><br /><br />1 - 3 of 3</td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<!--Verify roles persist after refresh-->
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<tr>
	<td>refreshAndWait</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.groups-list.groups-list-no-padding</td>
	<td>Name<br />Member Count<br />Roles<br /><br /><br /><br />abc0 membersMember<br /><br /><br />Remove<br /><br />developers0 membersTeam Admin<br /><br /><br />Remove<br /><br />engineering0 membersTeam Admin<br /><br /><br />Remove<br /><br /><br />1 - 3 of 3</td>
</tr>
<!--Cleanup: Set all back to Member-->
<tr>
	<td>waitForText</td>
	<td>//div[2]/div/div/div/div/a/span/span</td>
	<td>Team Admin</td>
</tr>
<tr>
	<td>click</td>
	<td>//div[2]/div/div/div/div/a/span/span</td>
	<td>Team Admin</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#role-to-be &gt; button.style--none</td>
	<td>Member</td>
</tr>
<tr>
	<td>click</td>
	<td>css=#role-to-be &gt; button.style--none</td>
	<td>Member</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[3]/div/div/div/div/a/span/span</td>
	<td>Team Admin</td>
</tr>
<tr>
	<td>click</td>
	<td>//div[3]/div/div/div/div/a/span/span</td>
	<td>Team Admin</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#role-to-be &gt; button.style--none</td>
	<td>Member</td>
</tr>
<tr>
	<td>click</td>
	<td>css=#role-to-be &gt; button.style--none</td>
	<td>Member</td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<!--Ensure lindy.test is Team Admin-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=user_management/users</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=user_management/users</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=searchUsers</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=searchUsers</td>
	<td>lindy.test</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.more-modal__name &gt; a &gt; span</td>
	<td>@lindy.test-simulator.amazonses.com - *Test</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.text-right &gt; a &gt; span &gt; span</td>
	<td>Member</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.text-right &gt; a &gt; span &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//li[3]/button</td>
	<td>Manage Teams</td>
</tr>
<tr>
	<td>click</td>
	<td>//li[3]/button</td>
	<td>Manage Teams</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.manage-teams__team-name</td>
	<td>Constrain-Dev</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.MenuWrapper. &gt; a &gt; span</td>
	<td>Team Member</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.MenuWrapper. &gt; a &gt; span</td>
	<td>Team Member</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=li.MenuItem &gt; button.style--none</td>
	<td>Make Team Admin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=li.MenuItem &gt; button.style--none</td>
	<td>Make Team Admin</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.MenuWrapper. &gt; a &gt; span</td>
	<td>Team Admin</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.close</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.close</td>
	<td></td>
</tr>
<!--LOG OUT system admin user-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=svg[title=&quot;Menu Icon&quot;]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=svg[title=&quot;Menu Icon&quot;]</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=li.MenuItem button.style--none:contains('Log Out')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=li.MenuItem button.style--none:contains('Log Out')</td>
	<td></td>
</tr>
<!--LOG IN Team Admin lindy.test-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=loginId</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=loginId</td>
	<td>lindy.test</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=loginPassword</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=loginPassword</td>
	<td>Password1</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<!--Set roles on Manage Groups page and save-->
<tr>
	<td>waitForText</td>
	<td>id=headerTeamName</td>
	<td>Constrain-Dev</td>
</tr>
<tr>
	<td>click</td>
	<td>id=headerTeamName</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=#manageGroups &gt; button.style--none.</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=#manageGroups &gt; button.style--none.</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=teamGroupsDropdown_developers</td>
	<td>Team Members</td>
</tr>
<tr>
	<td>click</td>
	<td>id=teamGroupsDropdown_developers</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=li.MenuItem &gt; button.style--none</td>
	<td>Make Team Admins</td>
</tr>
<tr>
	<td>click</td>
	<td>css=li.MenuItem &gt; button.style--none</td>
	<td></td>
</tr>
</tbody></table>
</body>
</html>
