<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="https://selenium.test.mattermost.com/" />
<title>SysConsPolicy2Invites</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">SysConsPolicy2Invites</td></tr>
</thead><tbody>
<!--Already logged in as system admin from previous setup test-->
<!--Set to System Admin can invite-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=systemConsole</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=systemConsole</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=policy</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=policy</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.help-text &gt; span</td>
	<td>Set policy on who can invite others to a team using Send Email Invite to invite new users by email, or the Get Team Invite Link and Add Members to Team options from the Main Menu. If Get Team Invite Link is used to share a link, you can expire the invite code from Team Settings &gt; Invite Code after the desired users join the team.</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=restrictTeamInvite</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>id=restrictTeamInvite</td>
	<td>label=System Admins</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<!--LOG OUT admin-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<!--LOG IN nonsysadmin-->
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>nonsysadmin@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>Town Square</td>
</tr>
<!--Verify Send Email Invite is hidden for team admin-->
<tr>
	<td>waitForText</td>
	<td>id=headerTeamName</td>
	<td>NonAdminCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=accountSettings</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>id=getTeamInviteLink</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>//button[@id='addUsersToTeam']</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>id=sendEmailInvite</td>
	<td></td>
</tr>
<!--Log out team admin and log in system admin to verify invite is accessible-->
<!--LOG OUT nonsysadmin-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<!--LOG IN admin-->
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>admin</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>Town Square</td>
</tr>
<!--Switch to team created by nonsysadmin-->
<tr>
	<td>storeLocation</td>
	<td>urlwhole</td>
	<td></td>
</tr>
<tr>
	<td>storeEval</td>
	<td>&quot;${urlwhole}&quot;.split(&quot;/&quot;)[0]</td>
	<td>urlbase</td>
</tr>
<tr>
	<td>open</td>
	<td>${urlbase}/nonadmincreated</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=headerTeamName</td>
	<td>NonAdminCreated</td>
</tr>
<!--Verify invite available for system admin-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=sendEmailInvite</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=getTeamInviteLink</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//button[@id='addUsersToTeam']</td>
	<td>Add Members to Team</td>
</tr>
<!--Set to Team and System Admin can invite-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=systemConsole</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=systemConsole</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=policy</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=policy</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=restrictTeamInvite</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>id=restrictTeamInvite</td>
	<td>label=Team and System Admins</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<!--Log out admin and log in team admin to verify-->
<!--LOG OUT nonsysadmin-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<!--LOG IN nonsysadmin-->
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=loginId</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>nonsysadmin</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>Town Square</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=NoNonAdminCreated</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=NoNonAdminCreated</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=headerTeamName</td>
	<td>NonAdminCreated</td>
</tr>
<!--Verify team admin can invite-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=sendEmailInvite</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=getTeamInviteLink</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//button[@id='addUsersToTeam']</td>
	<td>Add Members to Team</td>
</tr>
<!--Verify nonâ€“ team or system admin cannot send invite-->
<tr>
	<td>storeLocation</td>
	<td>urlwhole</td>
	<td></td>
</tr>
<tr>
	<td>storeEval</td>
	<td>&quot;${urlwhole}&quot;.split(&quot;/&quot;)[0]</td>
	<td>urlbase</td>
</tr>
<tr>
	<td>open</td>
	<td>${urlbase}/sysadmcreated</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=headerTeamName</td>
	<td>SysAdmCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=accountSettings</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>id=sendEmailInvite</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>id=getTeamInviteLink</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotText</td>
	<td>//button[@id='addUsersToTeam']</td>
	<td>Add Members to Team</td>
</tr>
<!--Log out nonsysadmin and log in system admin-->
<!--LOG OUT nonsysadmin-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<!--LOG IN admin-->
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=loginId</td>
	<td>admin</td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>admin</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>Town Square</td>
</tr>
<!--Set to All team members can invite-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=systemConsole</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=systemConsole</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=policy</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=policy</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.help-text &gt; span</td>
	<td>Set policy on who can invite others to a team using Send Email Invite to invite new users by email, or the Get Team Invite Link and Add Members to Team options from the Main Menu. If Get Team Invite Link is used to share a link, you can expire the invite code from Team Settings &gt; Invite Code after the desired users join the team.</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=restrictTeamInvite</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>id=restrictTeamInvite</td>
	<td>label=All team members</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<!--LOG OUT admin-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<!--LOG IN nonsysadmin-->
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>nonsysadmin@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>Town Square</td>
</tr>
<!--Switch to team created by system admin, verify can invite-->
<tr>
	<td>storeLocation</td>
	<td>urlwhole</td>
	<td></td>
</tr>
<tr>
	<td>storeEval</td>
	<td>&quot;${urlwhole}&quot;.split(&quot;/&quot;)[0]</td>
	<td>urlbase</td>
</tr>
<tr>
	<td>open</td>
	<td>${urlbase}/sysadmcreated</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=headerTeamName</td>
	<td>SysAdmCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=sendEmailInvite</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=getTeamInviteLink</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//button[@id='addUsersToTeam']</td>
	<td>Add Members to Team</td>
</tr>
</tbody></table>
</body>
</html>
