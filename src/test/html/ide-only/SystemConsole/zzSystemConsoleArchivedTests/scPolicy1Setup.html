<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="https://selenium.test.mattermost.com/" />
<title>SysConsPolicy1Setup</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">SysConsPolicy1Setup</td></tr>
</thead><tbody>
<!--If testing on a different server, first create system admin-->
<!--admin | admin@test.com | passwd-->
<!--LOG IN admin-->
<tr>
	<td>openAndWait</td>
	<td>/login</td>
	<td></td>
</tr>
<!--DisableAnimations-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>admin</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<!--Create team for this test, system admin creates SysAdmCreated-->
<tr>
	<td>waitForElementPresent</td>
	<td>xpath=(//a[@id='createTeam']/span)[2]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=(//a[@id='createTeam']/span)[2]</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=input.form-control</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>css=input.form-control</td>
	<td>SysAdmCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>//button[@type='submit']</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//button[@type='submit']</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>Town Square</td>
</tr>
<!--Add non-admin user to team via team invite link-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=getTeamInviteLink</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=getTeamInviteLink</td>
	<td></td>
</tr>
<tr>
	<td>storeValue</td>
	<td>//div[2]/textarea</td>
	<td>sysadmcreatedinvite</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=linkModalCloseButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=linkModalCloseButton</td>
	<td></td>
</tr>
<!--LOG OUT admin-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<!--Open team invite link and create new account nonsysadmin-->
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>${sysadmcreatedinvite}</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=email</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=email</td>
	<td>nonsysadmin@test.com</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=name</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=name</td>
	<td>nonsysadmin</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=password</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=createAccountButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=createAccountButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=#tutorialSkipLink &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=#tutorialSkipLink &gt; span</td>
	<td></td>
</tr>
<!--Nonsysadmin creates team, add system admin as member-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>xpath=(//a[@id='createTeam'])[2]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=(//a[@id='createTeam'])[2]</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=input.form-control</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>css=input.form-control</td>
	<td>NonAdminCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>//button[@type='submit']</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//button[@type='submit']</td>
	<td></td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>css=input.form-control</td>
	<td>nonadmincreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>Town Square</td>
</tr>
<!--Add admin to team-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>//button[@id='addUsersToTeam']</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//button[@id='addUsersToTeam']</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>//div[@class='Select-input']/input</td>
	<td>admin</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.more-modal__name</td>
	<td>@admin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__name</td>
	<td>@admin</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=member_popover</td>
	<td>2</td>
</tr>
<!--Nonadmin creates private channel on team created by nonadmin-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=createPrivateChannel</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=createPrivateChannel</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=newPrivateChannelName</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=newPrivateChannelName</td>
	<td>NonAdminCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>NonAdminCreated</td>
</tr>
<!--Add system admin to channel-->
<tr>
	<td>waitForElementPresent</td>
	<td>//div[@id='channelIntro']/button</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='channelIntro']/button</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.more-modal__name</td>
	<td>@admin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__name</td>
	<td>@admin</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=p.primary-message &gt; span</td>
	<td>No items found</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=member_popover</td>
	<td>2</td>
</tr>
<!--Nonadmin creates channels on team created by system admin-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=SySysAdmCreated</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=SySysAdmCreated</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=h1#headerTeamName.team__name</td>
	<td>SysAdmCreated</td>
</tr>
<!--Create public channel-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=createPublicChannel</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=createPublicChannel</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=newPublicChannelName</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=newPublicChannelName</td>
	<td>PubNonAdminCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>PubNonAdminCreated</td>
</tr>
<!--Add system admin to channel-->
<tr>
	<td>waitForElementPresent</td>
	<td>//div[@id='channelIntro']/button</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='channelIntro']/button</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.more-modal__name</td>
	<td>@admin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__name</td>
	<td>@admin</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span:contains('admin added to the channel by nonsysadmin')</td>
	<td></td>
</tr>
<!--Create private channel-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=createPrivateChannel</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=createPrivateChannel</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=newPrivateChannelName</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=newPrivateChannelName</td>
	<td>PriNonAdminCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>PriNonAdminCreated</td>
</tr>
<!--Add system admin to channel-->
<tr>
	<td>waitForElementPresent</td>
	<td>//div[@id='channelIntro']/button</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='channelIntro']/button</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.more-modal__name</td>
	<td>@admin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__name</td>
	<td>@admin</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span:contains('admin added to the channel by nonsysadmin')</td>
	<td></td>
</tr>
<!--Log out nonadmin and log in admin to create channels on the team nonadmin created-->
<!--LOG OUT nonsysadmin-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<!--LOG IN admin-->
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>admin@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=3NoNonAdminCreated</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=3NoNonAdminCreated</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=h1#headerTeamName.team__name</td>
	<td>NonAdminCreated</td>
</tr>
<!--Create public channel on nonadmin's team-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=createPublicChannel</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=createPublicChannel</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=newPublicChannelName</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=newPublicChannelName</td>
	<td>PubAdminCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>PubAdminCreated</td>
</tr>
<!--Create private channel on nonadmin's team-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=createPrivateChannel</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=createPrivateChannel</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=newPrivateChannelName</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=newPrivateChannelName</td>
	<td>PriAdminCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>PriAdminCreated</td>
</tr>
<!--Add other nonadmin user to channels you created-->
<tr>
	<td>waitForElementPresent</td>
	<td>//div[@id='channelIntro']/button</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='channelIntro']/button</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.more-modal__name</td>
	<td>@nonsysadmin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__name</td>
	<td>@nonsysadmin</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>nonsysadmin added to the channel by admin</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=PubAdminCreated</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=PubAdminCreated</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>PubAdminCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>//div[@id='channelIntro']/button</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='channelIntro']/button</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.more-modal__name</td>
	<td>@nonsysadmin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__name</td>
	<td>@nonsysadmin</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>nonsysadmin added to the channel by admin</td>
	<td></td>
</tr>
<!--Create private channel (so there is pri channel nonsysadmin is complete non-admin on)-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=2SySysAdmCreated</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=2SySysAdmCreated</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=h1#headerTeamName.team__name</td>
	<td>SysAdmCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=createPrivateChannel</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=createPrivateChannel</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=newPrivateChannelName</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=newPrivateChannelName</td>
	<td>PriAdmCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<!--Add nonsysadmin to private channel where they are not any kind of admin-->
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>PriAdmCreated</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>//div[@id='channelIntro']/button</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='channelIntro']/button</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.more-modal__name</td>
	<td>@nonsysadmin</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__name</td>
	<td>@nonsysadmin</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
</tbody></table>
</body>
</html>