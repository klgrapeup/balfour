<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="https://selenium.test.mattermost.com/" />
<title>scSecSignup</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">scSecSignup</td></tr>
</thead><tbody>
<!--LOG IN admin-->
<tr>
	<td>openAndWait</td>
	<td>/login</td>
	<td></td>
</tr>
<!--DisableAnimations-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>admin@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Town Square</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=System Console</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=System Console</td>
	<td></td>
</tr>
<!--Verify settings: email not required and open server true-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=signup</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=signup</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=h3.admin-console-header &gt; span</td>
	<td>Signup</td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=EmailSettings.RequireEmailVerificationfalse</td>
	<td>on</td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=TeamSettings.EnableOpenServertrue</td>
	<td>on</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=div.MenuWrapper.AdminSidebarHeader &gt; div</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.MenuWrapper.AdminSidebarHeader &gt; div</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=li.MenuItem a:contains('Switch to&nbsp;&nbsp;UI Automation')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=li.MenuItem a:contains('Switch to&nbsp;&nbsp;UI Automation')</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=#getTeamInviteLink &gt; button.style--none</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=#getTeamInviteLink &gt; button.style--none</td>
	<td></td>
</tr>
<tr>
	<td>storeText</td>
	<td>id=linkModalTextArea</td>
	<td>invitelink</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=linkModalCloseButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=linkModalCloseButton</td>
	<td></td>
</tr>
<!--LOG OUT admin-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=#logout &gt; button.style--none</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=#logout &gt; button.style--none</td>
	<td></td>
</tr>
<!--Create one now link > Signup page-->
<tr>
	<td>waitForText</td>
	<td>css=#signup &gt; span</td>
	<td>Create one now</td>
</tr>
<tr>
	<td>waitForAttribute</td>
	<td>link=Create one now@href</td>
	<td>/signup_user_complete</td>
</tr>
<tr>
	<td>click</td>
	<td>link=Create one now</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=email</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=email</td>
	<td>noemailverify@test.com</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=name</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=name</td>
	<td>noemailverify</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=password</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=createAccountButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=createAccountButton</td>
	<td></td>
</tr>
<!--Taken directly to team selection page-->
<tr>
	<td>waitForText</td>
	<td>css=div.signup__content &gt; h4 &gt; span</td>
	<td>Teams you can join:</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Create a new team</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<!--LOG IN admin-->
<tr>
	<td>openAndWait</td>
	<td>/login</td>
	<td></td>
</tr>
<!--DisableAnimations-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>admin@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Town Square</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=System Console</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=System Console</td>
	<td></td>
</tr>
<!--Set open server to false-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=signup</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=signup</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=h3.admin-console-header &gt; span</td>
	<td>Signup</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=TeamSettings.EnableOpenServerfalse</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=TeamSettings.EnableOpenServerfalse</td>
	<td></td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=TeamSettings.EnableOpenServerfalse</td>
	<td>on</td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<!--LOG OUT admin-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=div.MenuWrapper.AdminSidebarHeader &gt; div</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.MenuWrapper.AdminSidebarHeader &gt; div</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none span:contains('Logout')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none span:contains('Logout')</td>
	<td></td>
</tr>
<tr>
	<td>refreshAndWait</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=loginId</td>
	<td></td>
</tr>
<!--No link present to create new account-->
<tr>
	<td>waitForNotText</td>
	<td>css=#signup &gt; span</td>
	<td>Create one now</td>
</tr>
<tr>
	<td>waitForNotAttribute</td>
	<td>link=Create one now@href</td>
	<td>/signup_user_complete</td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>link=Create one now</td>
	<td></td>
</tr>
<!--LOG IN admin-->
<tr>
	<td>openAndWait</td>
	<td>/login</td>
	<td></td>
</tr>
<!--DisableAnimations-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>admin@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Town Square</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=System Console</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=System Console</td>
	<td></td>
</tr>
<!--Set open server to true-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=signup</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=signup</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=h3.admin-console-header &gt; span</td>
	<td>Signup</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=TeamSettings.EnableOpenServertrue</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=TeamSettings.EnableOpenServertrue</td>
	<td></td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=TeamSettings.EnableOpenServertrue</td>
	<td>on</td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<!--Disable email signup, enable GitLab (with fake creds)-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=authentication_email</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=authentication_email</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=EmailSettings.EnableSignUpWithEmailfalse</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=EmailSettings.EnableSignUpWithEmailfalse</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=EmailSettings.EnableSignInWithEmailfalse</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=EmailSettings.EnableSignInWithEmailfalse</td>
	<td></td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=oauth</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=oauth</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=oauthType</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>id=oauthType</td>
	<td>GitLab</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=GitLabSettings.Id</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=GitLabSettings.Id</td>
	<td>jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=GitLabSettings.Secret</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=GitLabSettings.Secret</td>
	<td>jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=GitLabSettings.Url</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=GitLabSettings.Url</td>
	<td>http://gitlab.com</td>
</tr>
<!--Endpoints autofill based on URL that was entered-->
<tr>
	<td>waitForTextPresent</td>
	<td></td>
	<td>http://gitlab.com/api/v4/user</td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td></td>
	<td>http://gitlab.com/oauth/authorize</td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td></td>
	<td>http://gitlab.com/oauth/token</td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<!--Still able to see link to create new account with email signin off-->
<!--LOG OUT admin-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=div.MenuWrapper.AdminSidebarHeader &gt; div</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.MenuWrapper.AdminSidebarHeader &gt; div</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none span:contains('Logout')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none span:contains('Logout')</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=loginId</td>
	<td></td>
</tr>
<tr>
	<td>refreshAndWait</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=loginId</td>
	<td></td>
</tr>
<tr>
	<td>waitForAttribute</td>
	<td>css=div.form-group input#loginId.form-control@placeholder</td>
	<td>Username</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#signup &gt; span</td>
	<td>Create one now</td>
</tr>
<tr>
	<td>click</td>
	<td>css=#signup &gt; span</td>
	<td>Create one now</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=strong &gt; span</td>
	<td>Create an account with:</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>link=GitLab Single Sign-On</td>
	<td>GitLab Single Sign-On</td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>id=email</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>id=name</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>id=password</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>id=createAccountButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.color--light &gt; a &gt; span</td>
	<td>Click here to sign in.</td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.color--light &gt; a &gt; span</td>
	<td>Click here to sign in.</td>
</tr>
<!--LOG IN admin-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>admin</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<!--Set email signup and signin back to true, remove GitLab-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=System Console</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=System Console</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=authentication_email</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=authentication_email</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=EmailSettings.EnableSignUpWithEmailtrue</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=EmailSettings.EnableSignUpWithEmailtrue</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=EmailSettings.EnableSignInWithEmailtrue</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=EmailSettings.EnableSignInWithEmailtrue</td>
	<td></td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=oauth</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=oauth</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=oauthType</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=GitLabSettings.Id</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=GitLabSettings.Secret</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=GitLabSettings.Url</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=GitLabSettings.Url</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>id=oauthType</td>
	<td>Do not allow sign-in via an OAuth 2.0 provider</td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>id=GitLabSettings.Id</td>
	<td></td>
</tr>
<tr>
	<td>waitForEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotEditable</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<!--Regenerate invite salt-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=signup</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=signup</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=button.btn.btn-default</td>
	<td>Invalidate pending email invites</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.admin-console</td>
	<td>SignupRequire Email Verification: truefalseTypically set to true in production. When true, Mattermost requires email verification after account creation prior to allowing login. Developers may set this field to false to skip sending verification emails for faster development.<br /><br /><br />Enable Open Server: truefalseWhen true, anyone can signup for a user account on this server without the need to be invited.<br /><br /><br />Enable Email Invitations: truefalseWhen true users can invite others to the system using email.<br /><br /><br />Invalidate pending email invites<br />This will invalidate active email invitations that have not been accepted by the user. By default email invitations expire after 48 hours.<br /><br /><br /><br />Save</td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-default</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.alert.alert-success &gt; span</td>
	<td>Pending email invitations invalidated successfully</td>
</tr>
<!--LOG OUT admin-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=div.MenuWrapper.AdminSidebarHeader &gt; div</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.MenuWrapper.AdminSidebarHeader &gt; div</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none span:contains('Logout')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none span:contains('Logout')</td>
	<td></td>
</tr>
</tbody></table>
</body>
</html>
